<videomonkey>
    <commands>
        <command id="ffmpeg_pass0"> -vpre $ffmpeg_vpre </command>
        <command id="ffmpeg_pass1"> -vpre $ffmpeg_vpre_pass1 -pass 1 -passlogfile $pass_log_file </command>
		<command id="ffmpeg_pass2"> -vpre $ffmpeg_vpre -pass 2 -passlogfile $pass_log_file </command>
		<command id="ffmpeg_options"> -vcodec $ffmpeg_vcodec -b $bitrate -s $ffmpeg_output_video_size  </command>
		<command id="quicktime_to_audio_file"> $qt_export $input_file --video=0 $tmp_audio_file </command>
		<command id="correct_yuv"> $yuvcorrect -v 0 -Y LUMINANCE_1.20_0_255_0_255 -Y CHROMINANCE_0_1.04_128_1.04_128_0_255 </command>
		<command id="quicktime_to_yuv"> $movtoy4m -f -w $input_video_width -h $input_video_height -F $framerate -a $aspect_ratio $input_file | !correct_yuv </command>
		<command id="yuv_to_ffmpeg_av"> $ffmpeg -y -i - -i $tmp_audio_file </command>
		<command id="yuv_to_ffmpeg_v"> $ffmpeg -y -i - </command>
		<command id="ffmpeg_normal"> $ffmpeg -y -i $input_file </command>
		<command id="quicktime_av_pass0"> $quicktime_to_yuv | $yuv_to_ffmpeg_av $ffmpeg_options $ffmpeg_pass0 $output_file </command>
		<command id="quicktime_av_pass1"> $quicktime_to_yuv | $yuv_to_ffmpeg_av $ffmpeg_options $ffmpeg_pass1 $output_file </command>
		<command id="quicktime_av_pass2"> $quicktime_to_yuv | $yuv_to_ffmpeg_av $ffmpeg_options $ffmpeg_pass2 $output_file </command>
		<command id="quicktime_v_pass0"> $quicktime_to_yuv | $yuv_to_ffmpeg_v $ffmpeg_options $ffmpeg_pass0 $output_file </command>
		<command id="quicktime_v_pass1"> $quicktime_to_yuv | $yuv_to_ffmpeg_v $ffmpeg_options $ffmpeg_pass1 $output_file </command>
		<command id="quicktime_v_pass2"> $quicktime_to_yuv | $yuv_to_ffmpeg_v $ffmpeg_options $ffmpeg_pass2 $output_file </command>
		<command id="normal_pass0"> $ffmpeg_normal $ffmpeg_options $ffmpeg_pass0 $output_file </command>
		<command id="normal_pass1"> $ffmpeg_normal $ffmpeg_options $ffmpeg_pass1 $output_file </command>
		<command id="normal_pass2"> $ffmpeg_normal $ffmpeg_options $ffmpeg_pass2 $output_file </command>
    </commands>
    <script>
        function audio(type)
        {
            switch(type) {
                case "low":    params.audioBitrate =  16000; params.audioSampleRate = 11025; params.audioChannels = 1; break;
                case "medium": params.audioBitrate =  32000; params.audioSampleRate = 22050; params.audioChannels = 1; break;
                case "high":   params.audioBitrate = 128000; params.audioSampleRate = 48000; params.audioChannels = 2; break;
            }
        }
    </script>
    <default_device>
        <quality>
            <quality_stop which="0" bitrate="200000" />
            <quality_stop which="1" title="Tiny" bitrate="400000" script="audio('low'); params.size = 0.5" />
            <quality_stop which="2" title="Low" bitrate="800000" script="audio('high'); params.size = 1" />
            <quality_stop which="3" title="Standard" bitrate="1100000" script="audio('high'); params.size = 1" />
            <quality_stop which="4" title="High" bitrate="1500000" script="audio('high'); params.size = 1" />
            <quality_stop which="5" title="Go Nuts" bitrate="2000000" script="audio('high'); params.size = 1" />
        </quality>
        <performance>
            <performance_item title="Fastest">
                <param id="two_pass" value="" />
                <param id="ffmpeg_vpre" value="fastest" />
            </performance_item>
            <performance_item title="Fast">
                <param id="two_pass" value="" />
                <param id="ffmpeg_vpre" value="default" />
            </performance_item>
            <performance_item title="Normal">
                <param id="two_pass" value="" />
                <param id="ffmpeg_vpre" value="normal" />
            </performance_item>
            <performance_item title="Normal (2 pass)">
                <param id="two_pass" value="_2pass" />
                <param id="ffmpeg_vpre" value="normal" />
            </performance_item>
            <performance_item title="High Quality">
                <param id="two_pass" value="" />
                <param id="ffmpeg_vpre" value="hq" />
            </performance_item>
            <performance_item title="High Quality (2 pass)">
                <param id="two_pass" value="_2pass" />
                <param id="ffmpeg_vpre" value="hq" />
            </performance_item>
        </performance>
        <param id="ffmpeg_vcodec" value="libx264" />
        <param id="video_suffix" value="mp4" />
        <recipes>
            <recipe is_quicktime="true" has_audio="true" is_2pass="false">
                !quicktime_to_audio_file ; !quicktime_av_pass0
            </recipe>
            <recipe is_quicktime="true" has_audio="true" is_2pass="true">
                !quicktime_to_audio_file ; !quicktime_av_pass1 ; !quicktime_av_pass2
            </recipe>
            <recipe is_quicktime="true" has_audio="false" is_2pass="false">
                !quicktime_v_pass0
            </recipe>
            <recipe is_quicktime="true" has_audio="false" is_2pass="true">
                !quicktime_v_pass1 ; !quicktime_v_pass2
            </recipe>
            <recipe is_quicktime="false" has_audio="true" is_2pass="false">
                !normal_pass0
            </recipe>
            <recipe is_quicktime="false" has_audio="true" is_2pass="true">
                !normal_pass1 ; !normal_pass2
            </recipe>
            <recipe is_quicktime="false" has_audio="false" is_2pass="false">
                !normal_pass0
            </recipe>
            <recipe is_quicktime="false" has_audio="false" is_2pass="true">
                !normal_pass1 ; !normal_pass2
            </recipe>
        </recipes>
    </default_device>
    <devices>
        <device_group title="iTunes">
            <device title="All Apple Devices" id="allappledevices" tab="long_q_2_check">
                <checkbox which="0" title="H.264 Video (slower but better)">
                    <checked_params>
                        <param id="ffmpeg_vcodec" value="libx264" />
                    </checked_params>
                    <unchecked_params>
                        <param id="ffmpeg_vcodec" value="mpeg4" />
                    </unchecked_params>
                </checkbox>
            </device>
            <device title="iPhone" id="iphone" tab="short_q_2_radio_2_check">
                <checkbox which="0" title="H.264 Video (slower but better)">
                    <checked_params>
                        <param id="ffmpeg_vcodec" value="libx264" />
                    </checked_params>
                    <unchecked_params>
                        <param id="ffmpeg_vcodec" value="mpeg4" />
                    </unchecked_params>
                </checkbox>
                <radio which="0" title="Best for:">
                    <menu_item title="iPhone">
                        <param id="ffmpeg_vcodec" value="libx264" />
                    </menu_item>
                    <menu_item title="TV">
                        <param id="ffmpeg_vcodec" value="mpeg4" />
                    </menu_item>
                </radio>
            </device>
        </device_group>
    <devices>
</videomonkey>

        